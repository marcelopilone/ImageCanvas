import{r as t,h as e,g as n}from"./p-793090eb.js";class r{constructor(t,e){this.canvasContent=t;this.layer=e}async run(){}}function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}function u(t,e,n){return n={path:e,exports:{},require:function(t,e){return o()}},t(n,n.exports),n.exports}function o(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var a=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});function n(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var r=function t(e,r){n(this,t);this.data=e;this.text=r.text||e;this.options=r};e.default=r}));var f=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.CODE39=undefined;var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();var r=i(a);function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function o(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function f(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var c=function(t){f(e,t);function e(t,n){u(this,e);t=t.toUpperCase();if(n.mod43){t+=d(p(t))}return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}n(e,[{key:"encode",value:function t(){var e=h("*");for(var n=0;n<this.data.length;n++){e+=h(this.data[n])+"0"}e+=h("*");return{data:e,text:this.text}}},{key:"valid",value:function t(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]);return e}(r.default);var s=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"];var l=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function h(t){return v(b(t))}function v(t){return l[t].toString(2)}function d(t){return s[t]}function b(t){return s.indexOf(t)}function p(t){var e=0;for(var n=0;n<t.length;n++){e+=b(t[n])}e=e%43;return e}e.CODE39=c}));var c=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n;function r(t,e,n){if(e in t){Object.defineProperty(t,e,{value:n,enumerable:true,configurable:true,writable:true})}else{t[e]=n}return t}var i=e.SET_A=0;var u=e.SET_B=1;var o=e.SET_C=2;e.SHIFT=98;var a=e.START_A=103;var f=e.START_B=104;var c=e.START_C=105;e.MODULO=103;e.STOP=106;e.FNC1=207;e.SET_BY_CODE=(n={},r(n,a,i),r(n,f,u),r(n,c,o),n);e.SWAP={101:i,100:u,99:o};e.A_START_CHAR=String.fromCharCode(208);e.B_START_CHAR=String.fromCharCode(209);e.C_START_CHAR=String.fromCharCode(210);e.A_CHARS="[\0-_È-Ï]";e.B_CHARS="[ -È-Ï]";e.C_CHARS="(Ï*[0-9]{2}Ï*)";e.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011]}));var s=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();var r=i(a);function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function o(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function f(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var s=function(t){f(e,t);function e(t,n){u(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.substring(1),n));r.bytes=t.split("").map((function(t){return t.charCodeAt(0)}));return r}n(e,[{key:"valid",value:function t(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function t(){var n=this.bytes;var r=n.shift()-105;var i=c.SET_BY_CODE[r];if(i===undefined){throw new RangeError("The encoding does not start with a start character.")}if(this.shouldEncodeAsEan128()===true){n.unshift(c.FNC1)}var u=e.next(n,1,i);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:e.getBar(r)+u.result+e.getBar((u.checksum+r)%c.MODULO)+e.getBar(c.STOP)}}},{key:"shouldEncodeAsEan128",value:function t(){var e=this.options.ean128||false;if(typeof e==="string"){e=e.toLowerCase()==="true"}return e}}],[{key:"getBar",value:function t(e){return c.BARS[e]?c.BARS[e].toString():""}},{key:"correctIndex",value:function t(e,n){if(n===c.SET_A){var r=e.shift();return r<32?r+64:r-32}else if(n===c.SET_B){return e.shift()-32}else{return(e.shift()-48)*10+e.shift()-48}}},{key:"next",value:function t(n,r,i){if(!n.length){return{result:"",checksum:0}}var u=void 0,o=void 0;if(n[0]>=200){o=n.shift()-105;var a=c.SWAP[o];if(a!==undefined){u=e.next(n,r+1,a)}else{if((i===c.SET_A||i===c.SET_B)&&o===c.SHIFT){n[0]=i===c.SET_A?n[0]>95?n[0]-96:n[0]:n[0]<32?n[0]+96:n[0]}u=e.next(n,r+1,i)}}else{o=e.correctIndex(n,i);u=e.next(n,r+1,i)}var f=e.getBar(o);var s=o*r;return{result:f+u.result,checksum:s+u.checksum}}}]);return e}(r.default);e.default=s}));var l=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function t(e){return e.match(new RegExp("^"+c.A_CHARS+"*"))[0].length};var r=function t(e){return e.match(new RegExp("^"+c.B_CHARS+"*"))[0].length};var i=function t(e){return e.match(new RegExp("^"+c.C_CHARS+"*"))[0]};function u(t,e){var n=e?c.A_CHARS:c.B_CHARS;var r=t.match(new RegExp("^("+n+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(r){return r[1]+String.fromCharCode(204)+o(t.substring(r[1].length))}var i=t.match(new RegExp("^"+n+"+"))[0];if(i.length===t.length){return t}return i+String.fromCharCode(e?205:206)+u(t.substring(i.length),!e)}function o(t){var e=i(t);var o=e.length;if(o===t.length){return t}t=t.substring(o);var a=n(t)>=r(t);return e+String.fromCharCode(a?206:205)+u(t,a)}e.default=function(t){var e=void 0;var a=i(t).length;if(a>=2){e=c.C_START_CHAR+o(t)}else{var f=n(t)>r(t);e=(f?c.A_START_CHAR:c.B_START_CHAR)+u(t,f)}return e.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,(function(t,e){return String.fromCharCode(203)+e}))}}));var h=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=i(s);var r=i(l);function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function o(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function a(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var f=function(t){a(e,t);function e(t,n){u(this,e);if(/^[\x00-\x7F\xC8-\xD3]+$/.test(t)){var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,(0,r.default)(t),n))}else{var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return o(i)}return e}(n.default);e.default=f}));var v=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();var r=i(s);function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function o(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function a(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var f=function(t){a(e,t);function e(t,n){u(this,e);return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c.A_START_CHAR+t,n))}n(e,[{key:"valid",value:function t(){return new RegExp("^"+c.A_CHARS+"+$").test(this.data)}}]);return e}(r.default);e.default=f}));var d=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();var r=i(s);function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function o(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function a(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var f=function(t){a(e,t);function e(t,n){u(this,e);return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c.B_START_CHAR+t,n))}n(e,[{key:"valid",value:function t(){return new RegExp("^"+c.B_CHARS+"+$").test(this.data)}}]);return e}(r.default);e.default=f}));var b=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();var r=i(s);function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function o(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function a(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var f=function(t){a(e,t);function e(t,n){u(this,e);return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c.C_START_CHAR+t,n))}n(e,[{key:"valid",value:function t(){return new RegExp("^"+c.C_CHARS+"+$").test(this.data)}}]);return e}(r.default);e.default=f}));var p=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.CODE128C=e.CODE128B=e.CODE128A=e.CODE128=undefined;var n=o(h);var r=o(v);var i=o(d);var u=o(b);function o(t){return t&&t.__esModule?t:{default:t}}e.CODE128=n.default;e.CODE128A=r.default;e.CODE128B=i.default;e.CODE128C=u.default}));var w=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.SIDE_BIN="101";e.MIDDLE_BIN="01010";e.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};e.EAN2_STRUCTURE=["LL","LG","GL","GG"];e.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];e.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]}));var y=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function t(e,n,r){var i=e.split("").map((function(t,e){return w.BINARIES[n[e]]})).map((function(t,n){return t?t[e[n]]:""}));if(r){var u=e.length-1;i=i.map((function(t,e){return e<u?t+r:t}))}return i.join("")};e.default=n}));var O=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();var r=u(y);var i=u(a);function u(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function f(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function c(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var s=function(t){c(e,t);function e(t,n){o(this,e);var r=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));r.fontSize=!n.flat&&n.fontSize>n.width*10?n.width*10:n.fontSize;r.guardHeight=n.height+r.fontSize/2+n.textMargin;return r}n(e,[{key:"encode",value:function t(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function t(e,n){return this.text.substr(e,n)}},{key:"leftEncode",value:function t(e,n){return(0,r.default)(e,n)}},{key:"rightText",value:function t(e,n){return this.text.substr(e,n)}},{key:"rightEncode",value:function t(e,n){return(0,r.default)(e,n)}},{key:"encodeGuarded",value:function t(){var e={fontSize:this.fontSize};var n={height:this.guardHeight};return[{data:w.SIDE_BIN,options:n},{data:this.leftEncode(),text:this.leftText(),options:e},{data:w.MIDDLE_BIN,options:n},{data:this.rightEncode(),text:this.rightText(),options:e},{data:w.SIDE_BIN,options:n}]}},{key:"encodeFlat",value:function t(){var e=[w.SIDE_BIN,this.leftEncode(),w.MIDDLE_BIN,this.rightEncode(),w.SIDE_BIN];return{data:e.join(""),text:this.text}}}]);return e}(i.default);e.default=s}));var E=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();var r=function t(e,n,r){if(e===null)e=Function.prototype;var i=Object.getOwnPropertyDescriptor(e,n);if(i===undefined){var u=Object.getPrototypeOf(e);if(u===null){return undefined}else{return t(u,n,r)}}else if("value"in i){return i.value}else{var o=i.get;if(o===undefined){return undefined}return o.call(r)}};var i=u(O);function u(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function a(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function f(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var c=function t(e){var n=e.substr(0,12).split("").map((function(t){return+t})).reduce((function(t,e,n){return n%2?t+e*3:t+e}),0);return(10-n%10)%10};var s=function(t){f(e,t);function e(t,n){o(this,e);if(t.search(/^[0-9]{12}$/)!==-1){t+=c(t)}var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));r.lastChar=n.lastChar;return r}n(e,[{key:"valid",value:function t(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===c(this.data)}},{key:"leftText",value:function t(){return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function t(){var n=this.data.substr(1,6);var i=w.EAN13_STRUCTURE[this.data[0]];return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,n,i)}},{key:"rightText",value:function t(){return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function t(){var n=this.data.substr(7,6);return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,n,"RRRRRR")}},{key:"encodeGuarded",value:function t(){var n=r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"encodeGuarded",this).call(this);if(this.options.displayValue){n.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}});if(this.options.lastChar){n.push({data:"00"});n.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}})}}return n}}]);return e}(i.default);e.default=s}));var j=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();var r=function t(e,n,r){if(e===null)e=Function.prototype;var i=Object.getOwnPropertyDescriptor(e,n);if(i===undefined){var u=Object.getPrototypeOf(e);if(u===null){return undefined}else{return t(u,n,r)}}else if("value"in i){return i.value}else{var o=i.get;if(o===undefined){return undefined}return o.call(r)}};var i=u(O);function u(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function a(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function f(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var c=function t(e){var n=e.substr(0,7).split("").map((function(t){return+t})).reduce((function(t,e,n){return n%2?t+e:t+e*3}),0);return(10-n%10)%10};var s=function(t){f(e,t);function e(t,n){o(this,e);if(t.search(/^[0-9]{7}$/)!==-1){t+=c(t)}return a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}n(e,[{key:"valid",value:function t(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===c(this.data)}},{key:"leftText",value:function t(){return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function t(){var n=this.data.substr(0,4);return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"leftEncode",this).call(this,n,"LLLL")}},{key:"rightText",value:function t(){return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function t(){var n=this.data.substr(4,4);return r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"rightEncode",this).call(this,n,"RRRR")}}]);return e}(i.default);e.default=s}));var g=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();var r=u(y);var i=u(a);function u(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function f(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function c(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var s=function t(e){var n=e.split("").map((function(t){return+t})).reduce((function(t,e,n){return n%2?t+e*9:t+e*3}),0);return n%10};var l=function(t){c(e,t);function e(t,n){o(this,e);return f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}n(e,[{key:"valid",value:function t(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function t(){var e=w.EAN5_STRUCTURE[s(this.data)];return{data:"1011"+(0,r.default)(this.data,e,"01"),text:this.text}}}]);return e}(i.default);e.default=l}));var m=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();var r=u(y);var i=u(a);function u(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function f(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function c(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var s=function(t){c(e,t);function e(t,n){o(this,e);return f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}n(e,[{key:"valid",value:function t(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function t(){var e=w.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,r.default)(this.data,e,"01"),text:this.text}}}]);return e}(i.default);e.default=s}));var x=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();e.checksum=l;var r=u(y);var i=u(a);function u(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function f(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function c(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var s=function(t){c(e,t);function e(t,n){o(this,e);if(t.search(/^[0-9]{11}$/)!==-1){t+=l(t)}var r=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));r.displayValue=n.displayValue;if(n.fontSize>n.width*10){r.fontSize=n.width*10}else{r.fontSize=n.fontSize}r.guardHeight=n.height+r.fontSize/2+n.textMargin;return r}n(e,[{key:"valid",value:function t(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==l(this.data)}},{key:"encode",value:function t(){if(this.options.flat){return this.flatEncoding()}else{return this.guardedEncoding()}}},{key:"flatEncoding",value:function t(){var e="";e+="101";e+=(0,r.default)(this.data.substr(0,6),"LLLLLL");e+="01010";e+=(0,r.default)(this.data.substr(6,6),"RRRRRR");e+="101";return{data:e,text:this.text}}},{key:"guardedEncoding",value:function t(){var e=[];if(this.displayValue){e.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}})}e.push({data:"101"+(0,r.default)(this.data[0],"L"),options:{height:this.guardHeight}});e.push({data:(0,r.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}});e.push({data:"01010",options:{height:this.guardHeight}});e.push({data:(0,r.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}});e.push({data:(0,r.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}});if(this.displayValue){e.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}})}return e}}]);return e}(i.default);function l(t){var e=0;var n;for(n=1;n<11;n+=2){e+=parseInt(t[n])}for(n=0;n<11;n+=2){e+=parseInt(t[n])*3}return(10-e%10)%10}e.default=s}));var _=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();var r=u(y);var i=u(a);function u(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function f(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function c(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var s=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"];var l=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]];var h=function(t){c(e,t);function e(t,n){o(this,e);var r=f(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));r.isValid=false;if(t.search(/^[0-9]{6}$/)!==-1){r.middleDigits=t;r.upcA=v(t,"0");r.text=n.text||""+r.upcA[0]+t+r.upcA[r.upcA.length-1];r.isValid=true}else if(t.search(/^[01][0-9]{7}$/)!==-1){r.middleDigits=t.substring(1,t.length-1);r.upcA=v(r.middleDigits,t[0]);if(r.upcA[r.upcA.length-1]===t[t.length-1]){r.isValid=true}else{return f(r)}}else{return f(r)}r.displayValue=n.displayValue;if(n.fontSize>n.width*10){r.fontSize=n.width*10}else{r.fontSize=n.fontSize}r.guardHeight=n.height+r.fontSize/2+n.textMargin;return r}n(e,[{key:"valid",value:function t(){return this.isValid}},{key:"encode",value:function t(){if(this.options.flat){return this.flatEncoding()}else{return this.guardedEncoding()}}},{key:"flatEncoding",value:function t(){var e="";e+="101";e+=this.encodeMiddleDigits();e+="010101";return{data:e,text:this.text}}},{key:"guardedEncoding",value:function t(){var e=[];if(this.displayValue){e.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}})}e.push({data:"101",options:{height:this.guardHeight}});e.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}});e.push({data:"010101",options:{height:this.guardHeight}});if(this.displayValue){e.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}})}return e}},{key:"encodeMiddleDigits",value:function t(){var e=this.upcA[0];var n=this.upcA[this.upcA.length-1];var i=l[parseInt(n)][parseInt(e)];return(0,r.default)(this.middleDigits,i)}}]);return e}(i.default);function v(t,e){var n=parseInt(t[t.length-1]);var r=s[n];var i="";var u=0;for(var o=0;o<r.length;o++){var a=r[o];if(a==="X"){i+=t[u++]}else{i+=a}}i=""+e+i;return""+i+(0,x.checksum)(i)}e.default=h}));var T=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.UPCE=e.UPC=e.EAN2=e.EAN5=e.EAN8=e.EAN13=undefined;var n=f(E);var r=f(j);var i=f(g);var u=f(m);var o=f(x);var a=f(_);function f(t){return t&&t.__esModule?t:{default:t}}e.EAN13=n.default;e.EAN8=r.default;e.EAN5=i.default;e.EAN2=u.default;e.UPC=o.default;e.UPCE=a.default}));var M=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.START_BIN="1010";e.END_BIN="11101";e.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]}));var L=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();var r=i(a);function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function o(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function f(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var c=function(t){f(e,t);function e(){u(this,e);return o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}n(e,[{key:"valid",value:function t(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function t(){var e=this;var n=this.data.match(/.{2}/g).map((function(t){return e.encodePair(t)})).join("");return{data:M.START_BIN+n+M.END_BIN,text:this.text}}},{key:"encodePair",value:function t(e){var n=M.BINARIES[e[1]];return M.BINARIES[e[0]].split("").map((function(t,e){return(t==="1"?"111":"1")+(n[e]==="1"?"000":"0")})).join("")}}]);return e}(r.default);e.default=c}));var k=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();var r=i(L);function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function o(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function a(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var f=function t(e){var n=e.substr(0,13).split("").map((function(t){return parseInt(t,10)})).reduce((function(t,e,n){return t+e*(3-n%2*2)}),0);return Math.ceil(n/10)*10-n};var c=function(t){a(e,t);function e(t,n){u(this,e);if(t.search(/^[0-9]{13}$/)!==-1){t+=f(t)}return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}n(e,[{key:"valid",value:function t(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===f(this.data)}}]);return e}(r.default);e.default=c}));var R=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.ITF14=e.ITF=undefined;var n=i(L);var r=i(k);function i(t){return t&&t.__esModule?t:{default:t}}e.ITF=n.default;e.ITF14=r.default}));var C=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();var r=i(a);function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function o(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function f(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var c=function(t){f(e,t);function e(t,n){u(this,e);return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}n(e,[{key:"encode",value:function t(){var e="110";for(var n=0;n<this.data.length;n++){var r=parseInt(this.data[n]);var i=r.toString(2);i=s(i,4-i.length);for(var u=0;u<i.length;u++){e+=i[u]=="0"?"100":"110"}}e+="1001";return{data:e,text:this.text}}},{key:"valid",value:function t(){return this.data.search(/^[0-9]+$/)!==-1}}]);return e}(r.default);function s(t,e){for(var n=0;n<e;n++){t="0"+t}return t}e.default=c}));var S=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.mod10=n;e.mod11=r;function n(t){var e=0;for(var n=0;n<t.length;n++){var r=parseInt(t[n]);if((n+t.length)%2===0){e+=r}else{e+=r*2%10+Math.floor(r*2/10)}}return(10-e%10)%10}function r(t){var e=0;var n=[2,3,4,5,6,7];for(var r=0;r<t.length;r++){var i=parseInt(t[t.length-1-r]);e+=n[r%n.length]*i}return(11-e%11)%11}}));var A=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=r(C);function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function u(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function o(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var a=function(t){o(e,t);function e(t,n){i(this,e);return u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t+(0,S.mod10)(t),n))}return e}(n.default);e.default=a}));var G=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=r(C);function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function u(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function o(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var a=function(t){o(e,t);function e(t,n){i(this,e);return u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t+(0,S.mod11)(t),n))}return e}(n.default);e.default=a}));var I=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=r(C);function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function u(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function o(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var a=function(t){o(e,t);function e(t,n){i(this,e);t+=(0,S.mod10)(t);t+=(0,S.mod10)(t);return u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return e}(n.default);e.default=a}));var X=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=r(C);function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function u(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function o(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var a=function(t){o(e,t);function e(t,n){i(this,e);t+=(0,S.mod11)(t);t+=(0,S.mod10)(t);return u(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return e}(n.default);e.default=a}));var N=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.MSI1110=e.MSI1010=e.MSI11=e.MSI10=e.MSI=undefined;var n=a(C);var r=a(A);var i=a(G);var u=a(I);var o=a(X);function a(t){return t&&t.__esModule?t:{default:t}}e.MSI=n.default;e.MSI10=r.default;e.MSI11=i.default;e.MSI1010=u.default;e.MSI1110=o.default}));var $=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.pharmacode=undefined;var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();var r=i(a);function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function o(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function f(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var c=function(t){f(e,t);function e(t,n){u(this,e);var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));r.number=parseInt(t,10);return r}n(e,[{key:"encode",value:function t(){var e=this.number;var n="";while(!isNaN(e)&&e!=0){if(e%2===0){n="11100"+n;e=(e-2)/2}else{n="100"+n;e=(e-1)/2}}n=n.slice(0,-2);return{data:n,text:this.text}}},{key:"valid",value:function t(){return this.number>=3&&this.number<=131070}}]);return e}(r.default);e.pharmacode=c}));var B=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.codabar=undefined;var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();var r=i(a);function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function o(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function f(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var c=function(t){f(e,t);function e(t,n){u(this,e);if(t.search(/^[0-9\-\$\:\.\+\/]+$/)===0){t="A"+t+"A"}var r=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t.toUpperCase(),n));r.text=r.options.text||r.text.replace(/[A-D]/g,"");return r}n(e,[{key:"valid",value:function t(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function t(){var e=[];var n=this.getEncodings();for(var r=0;r<this.data.length;r++){e.push(n[this.data.charAt(r)]);if(r!==this.data.length-1){e.push("0")}}return{text:this.text,data:e.join("")}}},{key:"getEncodings",value:function t(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]);return e}(r.default);e.codabar=c}));var P=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.GenericBarcode=undefined;var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();var r=i(a);function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function o(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function f(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var c=function(t){f(e,t);function e(t,n){u(this,e);return o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}n(e,[{key:"encode",value:function t(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function t(){return true}}]);return e}(r.default);e.GenericBarcode=c}));var D=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.default={CODE39:f.CODE39,CODE128:p.CODE128,CODE128A:p.CODE128A,CODE128B:p.CODE128B,CODE128C:p.CODE128C,EAN13:T.EAN13,EAN8:T.EAN8,EAN5:T.EAN5,EAN2:T.EAN2,UPC:T.UPC,UPCE:T.UPCE,ITF14:R.ITF14,ITF:R.ITF,MSI:N.MSI,MSI10:N.MSI10,MSI11:N.MSI11,MSI1010:N.MSI1010,MSI1110:N.MSI1110,pharmacode:$.pharmacode,codabar:B.codabar,GenericBarcode:P.GenericBarcode}}));var F=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){t[r]=n[r]}}}return t};e.default=function(t,e){return n({},t,e)}}));var U=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.default=n;function n(t){var e=[];function n(t){if(Array.isArray(t)){for(var r=0;r<t.length;r++){n(t[r])}}else{t.text=t.text||"";t.data=t.data||"";e.push(t)}}n(t);return e}}));var z=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.default=n;function n(t){t.marginTop=t.marginTop||t.margin;t.marginBottom=t.marginBottom||t.margin;t.marginRight=t.marginRight||t.margin;t.marginLeft=t.marginLeft||t.margin;return t}}));var V=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.default=n;function n(t){var e=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var n in e){if(e.hasOwnProperty(n)){n=e[n];if(typeof t[n]==="string"){t[n]=parseInt(t[n],10)}}}if(typeof t["displayValue"]==="string"){t["displayValue"]=t["displayValue"]!="false"}return t}}));var Q=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n={width:2,height:100,format:"auto",displayValue:true,fontOptions:"",font:"monospace",text:undefined,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:undefined,marginBottom:undefined,marginLeft:undefined,marginRight:undefined,valid:function t(){}};e.default=n}));var H=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=i(V);var r=i(Q);function i(t){return t&&t.__esModule?t:{default:t}}function u(t){var e={};for(var i in r.default){if(r.default.hasOwnProperty(i)){if(t.hasAttribute("jsbarcode-"+i.toLowerCase())){e[i]=t.getAttribute("jsbarcode-"+i.toLowerCase())}if(t.hasAttribute("data-"+i.toLowerCase())){e[i]=t.getAttribute("data-"+i.toLowerCase())}}}e["value"]=t.getAttribute("jsbarcode-value")||t.getAttribute("data-value");e=(0,n.default)(e);return e}e.default=u}));var J=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});e.getTotalWidthOfEncodings=e.calculateEncodingAttributes=e.getBarcodePadding=e.getEncodingHeight=e.getMaximumHeightOfEncodings=undefined;var n=r(F);function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){return e.height+(e.displayValue&&t.text.length>0?e.fontSize+e.textMargin:0)+e.marginTop+e.marginBottom}function u(t,e,n){if(n.displayValue&&e<t){if(n.textAlign=="center"){return Math.floor((t-e)/2)}else if(n.textAlign=="left"){return 0}else if(n.textAlign=="right"){return Math.floor(t-e)}}return 0}function o(t,e,r){for(var o=0;o<t.length;o++){var a=t[o];var f=(0,n.default)(e,a.options);var s;if(f.displayValue){s=c(a.text,f,r)}else{s=0}var l=a.data.length*f.width;a.width=Math.ceil(Math.max(s,l));a.height=i(a,f);a.barcodePadding=u(s,l,f)}}function a(t){var e=0;for(var n=0;n<t.length;n++){e+=t[n].width}return e}function f(t){var e=0;for(var n=0;n<t.length;n++){if(t[n].height>e){e=t[n].height}}return e}function c(t,e,n){var r;if(n){r=n}else if(typeof document!=="undefined"){r=document.createElement("canvas").getContext("2d")}else{return 0}r.font=e.fontOptions+" "+e.fontSize+"px "+e.font;var i=r.measureText(t);if(!i){return 0}var u=i.width;return u}e.getMaximumHeightOfEncodings=f;e.getEncodingHeight=i;e.getBarcodePadding=u;e.calculateEncodingAttributes=o;e.getTotalWidthOfEncodings=a}));var q=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();var r=i(F);function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var o=function(){function t(e,n,r){u(this,t);this.canvas=e;this.encodings=n;this.options=r}n(t,[{key:"render",value:function t(){if(!this.canvas.getContext){throw new Error("The browser does not support canvas.")}this.prepareCanvas();for(var e=0;e<this.encodings.length;e++){var n=(0,r.default)(this.options,this.encodings[e].options);this.drawCanvasBarcode(n,this.encodings[e]);this.drawCanvasText(n,this.encodings[e]);this.moveCanvasDrawing(this.encodings[e])}this.restoreCanvas()}},{key:"prepareCanvas",value:function t(){var e=this.canvas.getContext("2d");e.save();(0,J.calculateEncodingAttributes)(this.encodings,this.options,e);var n=(0,J.getTotalWidthOfEncodings)(this.encodings);var r=(0,J.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=n+this.options.marginLeft+this.options.marginRight;this.canvas.height=r;e.clearRect(0,0,this.canvas.width,this.canvas.height);if(this.options.background){e.fillStyle=this.options.background;e.fillRect(0,0,this.canvas.width,this.canvas.height)}e.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function t(e,n){var r=this.canvas.getContext("2d");var i=n.data;var u;if(e.textPosition=="top"){u=e.marginTop+e.fontSize+e.textMargin}else{u=e.marginTop}r.fillStyle=e.lineColor;for(var o=0;o<i.length;o++){var a=o*e.width+n.barcodePadding;if(i[o]==="1"){r.fillRect(a,u,e.width,e.height)}else if(i[o]){r.fillRect(a,u,e.width,e.height*i[o])}}}},{key:"drawCanvasText",value:function t(e,n){var r=this.canvas.getContext("2d");var i=e.fontOptions+" "+e.fontSize+"px "+e.font;if(e.displayValue){var u,o;if(e.textPosition=="top"){o=e.marginTop+e.fontSize-e.textMargin}else{o=e.height+e.textMargin+e.marginTop+e.fontSize}r.font=i;if(e.textAlign=="left"||n.barcodePadding>0){u=0;r.textAlign="left"}else if(e.textAlign=="right"){u=n.width-1;r.textAlign="right"}else{u=n.width/2;r.textAlign="center"}r.fillText(n.text,u,o)}}},{key:"moveCanvasDrawing",value:function t(e){var n=this.canvas.getContext("2d");n.translate(e.width,0)}},{key:"restoreCanvas",value:function t(){var e=this.canvas.getContext("2d");e.restore()}}]);return t}();e.default=o}));var K=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();var r=i(F);function i(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var o="http://www.w3.org/2000/svg";var a=function(){function t(e,n,r){u(this,t);this.svg=e;this.encodings=n;this.options=r;this.document=r.xmlDocument||document}n(t,[{key:"render",value:function t(){var e=this.options.marginLeft;this.prepareSVG();for(var n=0;n<this.encodings.length;n++){var i=this.encodings[n];var u=(0,r.default)(this.options,i.options);var o=this.createGroup(e,u.marginTop,this.svg);this.setGroupOptions(o,u);this.drawSvgBarcode(o,u,i);this.drawSVGText(o,u,i);e+=i.width}}},{key:"prepareSVG",value:function t(){while(this.svg.firstChild){this.svg.removeChild(this.svg.firstChild)}(0,J.calculateEncodingAttributes)(this.encodings,this.options);var e=(0,J.getTotalWidthOfEncodings)(this.encodings);var n=(0,J.getMaximumHeightOfEncodings)(this.encodings);var r=e+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(r,n);if(this.options.background){this.drawRect(0,0,r,n,this.svg).setAttribute("style","fill:"+this.options.background+";")}}},{key:"drawSvgBarcode",value:function t(e,n,r){var i=r.data;var u;if(n.textPosition=="top"){u=n.fontSize+n.textMargin}else{u=0}var o=0;var a=0;for(var f=0;f<i.length;f++){a=f*n.width+r.barcodePadding;if(i[f]==="1"){o++}else if(o>0){this.drawRect(a-n.width*o,u,n.width*o,n.height,e);o=0}}if(o>0){this.drawRect(a-n.width*(o-1),u,n.width*o,n.height,e)}}},{key:"drawSVGText",value:function t(e,n,r){var i=this.document.createElementNS(o,"text");if(n.displayValue){var u,a;i.setAttribute("style","font:"+n.fontOptions+" "+n.fontSize+"px "+n.font);if(n.textPosition=="top"){a=n.fontSize-n.textMargin}else{a=n.height+n.textMargin+n.fontSize}if(n.textAlign=="left"||r.barcodePadding>0){u=0;i.setAttribute("text-anchor","start")}else if(n.textAlign=="right"){u=r.width-1;i.setAttribute("text-anchor","end")}else{u=r.width/2;i.setAttribute("text-anchor","middle")}i.setAttribute("x",u);i.setAttribute("y",a);i.appendChild(this.document.createTextNode(r.text));e.appendChild(i)}}},{key:"setSvgAttributes",value:function t(e,n){var r=this.svg;r.setAttribute("width",e+"px");r.setAttribute("height",n+"px");r.setAttribute("x","0px");r.setAttribute("y","0px");r.setAttribute("viewBox","0 0 "+e+" "+n);r.setAttribute("xmlns",o);r.setAttribute("version","1.1");r.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function t(e,n,r){var i=this.document.createElementNS(o,"g");i.setAttribute("transform","translate("+e+", "+n+")");r.appendChild(i);return i}},{key:"setGroupOptions",value:function t(e,n){e.setAttribute("style","fill:"+n.lineColor+";")}},{key:"drawRect",value:function t(e,n,r,i,u){var a=this.document.createElementNS(o,"rect");a.setAttribute("x",e);a.setAttribute("y",n);a.setAttribute("width",r);a.setAttribute("height",i);u.appendChild(a);return a}}]);return t}();e.default=a}));var Z=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();function r(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function t(e,n,i){r(this,t);this.object=e;this.encodings=n;this.options=i}n(t,[{key:"render",value:function t(){this.object.encodings=this.encodings}}]);return t}();e.default=i}));var W=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=u(q);var r=u(K);var i=u(Z);function u(t){return t&&t.__esModule?t:{default:t}}e.default={CanvasRenderer:n.default,SVGRenderer:r.default,ObjectRenderer:i.default}}));var Y=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});function n(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function r(t,e){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e&&(typeof e==="object"||typeof e==="function")?e:t}function i(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof e)}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(e)Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e}var u=function(t){i(e,t);function e(t,i){n(this,e);var u=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));u.name="InvalidInputException";u.symbology=t;u.input=i;u.message='"'+u.input+'" is not a valid input for '+u.symbology;return u}return e}(Error);var o=function(t){i(e,t);function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t.name="InvalidElementException";t.message="Not supported type to render on";return t}return e}(Error);var a=function(t){i(e,t);function e(){n(this,e);var t=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));t.name="NoElementException";t.message="No element to render on.";return t}return e}(Error);e.InvalidInputException=u;e.InvalidElementException=o;e.NoElementException=a}));var tt=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var r=u(H);var i=u(W);function u(t){return t&&t.__esModule?t:{default:t}}function o(t){if(typeof t==="string"){return a(t)}else if(Array.isArray(t)){var e=[];for(var u=0;u<t.length;u++){e.push(o(t[u]))}return e}else if(typeof HTMLCanvasElement!=="undefined"&&t instanceof HTMLImageElement){return f(t)}else if(t&&t.nodeName&&t.nodeName.toLowerCase()==="svg"||typeof SVGElement!=="undefined"&&t instanceof SVGElement){return{element:t,options:(0,r.default)(t),renderer:i.default.SVGRenderer}}else if(typeof HTMLCanvasElement!=="undefined"&&t instanceof HTMLCanvasElement){return{element:t,options:(0,r.default)(t),renderer:i.default.CanvasRenderer}}else if(t&&t.getContext){return{element:t,renderer:i.default.CanvasRenderer}}else if(t&&(typeof t==="undefined"?"undefined":n(t))==="object"&&!t.nodeName){return{element:t,renderer:i.default.ObjectRenderer}}else{throw new Y.InvalidElementException}}function a(t){var e=document.querySelectorAll(t);if(e.length===0){return undefined}else{var n=[];for(var r=0;r<e.length;r++){n.push(o(e[r]))}return n}}function f(t){var e=document.createElement("canvas");return{element:e,options:(0,r.default)(t),renderer:i.default.CanvasRenderer,afterRender:function n(){t.setAttribute("src",e.toDataURL())}}}e.default=o}));var et=u((function(t,e){Object.defineProperty(e,"__esModule",{value:true});var n=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}return function(e,n,r){if(n)t(e.prototype,n);if(r)t(e,r);return e}}();function r(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}var i=function(){function t(e){r(this,t);this.api=e}n(t,[{key:"handleCatch",value:function t(e){if(e.name==="InvalidInputException"){if(this.api._options.valid!==this.api._defaults.valid){this.api._options.valid(false)}else{throw e.message}}else{throw e}this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function t(e){try{var n=e.apply(undefined,arguments);this.api._options.valid(true);return n}catch(t){this.handleCatch(t);return this.api}}}]);return t}();e.default=i}));var nt=u((function(t){var e=c(D);var n=c(F);var r=c(U);var i=c(z);var u=c(tt);var o=c(V);var a=c(et);var f=c(Q);function c(t){return t&&t.__esModule?t:{default:t}}var s=function t(){};var l=function t(e,n,r){var i=new s;if(typeof e==="undefined"){throw Error("No element to render on was provided.")}i._renderProperties=(0,u.default)(e);i._encodings=[];i._options=f.default;i._errorHandler=new a.default(i);if(typeof n!=="undefined"){r=r||{};if(!r.format){r.format=b()}i.options(r)[r.format](n,r).render()}return i};l.getModule=function(t){return e.default[t]};for(var h in e.default){if(e.default.hasOwnProperty(h)){v(e.default,h)}}function v(t,e){s.prototype[e]=s.prototype[e.toUpperCase()]=s.prototype[e.toLowerCase()]=function(r,i){var u=this;return u._errorHandler.wrapBarcodeCall((function(){i.text=typeof i.text==="undefined"?undefined:""+i.text;var a=(0,n.default)(u._options,i);a=(0,o.default)(a);var f=t[e];var c=d(r,f,a);u._encodings.push(c);return u}))}}function d(t,e,i){t=""+t;var u=new e(t,i);if(!u.valid()){throw new Y.InvalidInputException(u.constructor.name,t)}var o=u.encode();o=(0,r.default)(o);for(var a=0;a<o.length;a++){o[a].options=(0,n.default)(i,o[a].options)}return o}function b(){if(e.default["CODE128"]){return"CODE128"}return Object.keys(e.default)[0]}s.prototype.options=function(t){this._options=(0,n.default)(this._options,t);return this};s.prototype.blank=function(t){var e=new Array(t+1).join("0");this._encodings.push({data:e});return this};s.prototype.init=function(){if(!this._renderProperties){return}if(!Array.isArray(this._renderProperties)){this._renderProperties=[this._renderProperties]}var t;for(var r in this._renderProperties){t=this._renderProperties[r];var i=(0,n.default)(this._options,t.options);if(i.format=="auto"){i.format=b()}this._errorHandler.wrapBarcodeCall((function(){var n=i.value;var r=e.default[i.format.toUpperCase()];var u=d(n,r,i);p(t,u,i)}))}};s.prototype.render=function(){if(!this._renderProperties){throw new Y.NoElementException}if(Array.isArray(this._renderProperties)){for(var t=0;t<this._renderProperties.length;t++){p(this._renderProperties[t],this._encodings,this._options)}}else{p(this._renderProperties,this._encodings,this._options)}return this};s.prototype._defaults=f.default;function p(t,e,u){e=(0,r.default)(e);for(var o=0;o<e.length;o++){e[o].options=(0,n.default)(u,e[o].options);(0,i.default)(e[o].options)}(0,i.default)(u);var a=t.renderer;var f=new a(t.element,e,u);f.render();if(t.afterRender){t.afterRender()}}if(typeof window!=="undefined"){window.JsBarcode=l}if(typeof jQuery!=="undefined"){jQuery.fn.JsBarcode=function(t,e){var n=[];jQuery(this).each((function(){n.push(this)}));return l(n,t,e)}}t.exports=l}));const rt=i(nt);class it extends r{async run(){return new Promise(((t,e)=>{var n=document.createElement("canvas");rt(n,this.layer.data,{format:"CODE39",width:this.layer.canvasOptions.width_barcode,height:this.layer.canvasOptions.height_barcode,background:this.layer.canvasOptions.background,lineColor:this.layer.canvasOptions.lineColor,displayValue:"displayValue"in this.layer.canvasOptions?this.layer.canvasOptions.displayValue:true});let r=n.toDataURL("image/png");const i=new Image;i.src=r;try{i.onload=()=>{this.canvasContent.drawImage(i,this.layer.x,this.layer.y,this.layer.canvasOptions.width,this.layer.canvasOptions.height);t()}}catch(t){e(t)}}))}}class ut extends r{async run(){return new Promise(((t,e)=>{const n=new Image;n.src=this.layer.data;try{n.onload=()=>{this.canvasContent.drawImage(n,this.layer.x,this.layer.y,this.layer.width,this.layer.height);t()}}catch(t){e(t)}}))}}var ot=function(){return typeof Promise==="function"&&Promise.prototype&&Promise.prototype.then};let at;const ft=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];var ct=function t(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};var st=function t(e){return ft[e]};var lt=function(t){let e=0;while(t!==0){e++;t>>>=1}return e};var ht=function t(e){if(typeof e!=="function"){throw new Error('"toSJISFunc" is not a valid function.')}at=e};var vt=function(){return typeof at!=="undefined"};var dt=function t(e){return at(e)};var bt={getSymbolSize:ct,getSymbolTotalCodewords:st,getBCHDigit:lt,setToSJISFunction:ht,isKanjiModeEnabled:vt,toSJIS:dt};var pt=u((function(t,e){e.L={bit:1};e.M={bit:0};e.Q={bit:3};e.H={bit:2};function n(t){if(typeof t!=="string"){throw new Error("Param is not a string")}const n=t.toLowerCase();switch(n){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}e.isValid=function t(e){return e&&typeof e.bit!=="undefined"&&e.bit>=0&&e.bit<4};e.from=function t(r,i){if(e.isValid(r)){return r}try{return n(r)}catch(t){return i}}}));function wt(){this.buffer=[];this.length=0}wt.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++){this.putBit((t>>>e-n-1&1)===1)}},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);if(this.buffer.length<=e){this.buffer.push(0)}if(t){this.buffer[e]|=128>>>this.length%8}this.length++}};var yt=wt;function Ot(t){if(!t||t<1){throw new Error("BitMatrix size must be defined and greater than 0")}this.size=t;this.data=new Uint8Array(t*t);this.reservedBit=new Uint8Array(t*t)}Ot.prototype.set=function(t,e,n,r){const i=t*this.size+e;this.data[i]=n;if(r)this.reservedBit[i]=true};Ot.prototype.get=function(t,e){return this.data[t*this.size+e]};Ot.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};Ot.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var Et=Ot;var jt=u((function(t,e){const n=bt.getSymbolSize;e.getRowColCoords=function t(e){if(e===1)return[];const r=Math.floor(e/7)+2;const i=n(e);const u=i===145?26:Math.ceil((i-13)/(2*r-2))*2;const o=[i-7];for(let t=1;t<r-1;t++){o[t]=o[t-1]-u}o.push(6);return o.reverse()};e.getPositions=function t(n){const r=[];const i=e.getRowColCoords(n);const u=i.length;for(let t=0;t<u;t++){for(let e=0;e<u;e++){if(t===0&&e===0||t===0&&e===u-1||t===u-1&&e===0){continue}r.push([i[t],i[e]])}}return r}}));const gt=bt.getSymbolSize;const mt=7;var xt=function t(e){const n=gt(e);return[[0,0],[n-mt,0],[0,n-mt]]};var _t={getPositions:xt};var Tt=u((function(t,e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const n={N1:3,N2:3,N3:40,N4:10};e.isValid=function t(e){return e!=null&&e!==""&&!isNaN(e)&&e>=0&&e<=7};e.from=function t(n){return e.isValid(n)?parseInt(n,10):undefined};e.getPenaltyN1=function t(e){const r=e.size;let i=0;let u=0;let o=0;let a=null;let f=null;for(let t=0;t<r;t++){u=o=0;a=f=null;for(let c=0;c<r;c++){let r=e.get(t,c);if(r===a){u++}else{if(u>=5)i+=n.N1+(u-5);a=r;u=1}r=e.get(c,t);if(r===f){o++}else{if(o>=5)i+=n.N1+(o-5);f=r;o=1}}if(u>=5)i+=n.N1+(u-5);if(o>=5)i+=n.N1+(o-5)}return i};e.getPenaltyN2=function t(e){const r=e.size;let i=0;for(let t=0;t<r-1;t++){for(let n=0;n<r-1;n++){const r=e.get(t,n)+e.get(t,n+1)+e.get(t+1,n)+e.get(t+1,n+1);if(r===4||r===0)i++}}return i*n.N2};e.getPenaltyN3=function t(e){const r=e.size;let i=0;let u=0;let o=0;for(let t=0;t<r;t++){u=o=0;for(let n=0;n<r;n++){u=u<<1&2047|e.get(t,n);if(n>=10&&(u===1488||u===93))i++;o=o<<1&2047|e.get(n,t);if(n>=10&&(o===1488||o===93))i++}}return i*n.N3};e.getPenaltyN4=function t(e){let r=0;const i=e.data.length;for(let t=0;t<i;t++)r+=e.data[t];const u=Math.abs(Math.ceil(r*100/i/5)-10);return u*n.N4};function r(t,n,r){switch(t){case e.Patterns.PATTERN000:return(n+r)%2===0;case e.Patterns.PATTERN001:return n%2===0;case e.Patterns.PATTERN010:return r%3===0;case e.Patterns.PATTERN011:return(n+r)%3===0;case e.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(r/3))%2===0;case e.Patterns.PATTERN101:return n*r%2+n*r%3===0;case e.Patterns.PATTERN110:return(n*r%2+n*r%3)%2===0;case e.Patterns.PATTERN111:return(n*r%3+(n+r)%2)%2===0;default:throw new Error("bad maskPattern:"+t)}}e.applyMask=function t(e,n){const i=n.size;for(let t=0;t<i;t++){for(let u=0;u<i;u++){if(n.isReserved(u,t))continue;n.xor(u,t,r(e,u,t))}}};e.getBestMask=function t(n,r){const i=Object.keys(e.Patterns).length;let u=0;let o=Infinity;for(let t=0;t<i;t++){r(t);e.applyMask(t,n);const i=e.getPenaltyN1(n)+e.getPenaltyN2(n)+e.getPenaltyN3(n)+e.getPenaltyN4(n);e.applyMask(t,n);if(i<o){o=i;u=t}}return u}}));const Mt=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81];const Lt=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];var kt=function t(e,n){switch(n){case pt.L:return Mt[(e-1)*4+0];case pt.M:return Mt[(e-1)*4+1];case pt.Q:return Mt[(e-1)*4+2];case pt.H:return Mt[(e-1)*4+3];default:return undefined}};var Rt=function t(e,n){switch(n){case pt.L:return Lt[(e-1)*4+0];case pt.M:return Lt[(e-1)*4+1];case pt.Q:return Lt[(e-1)*4+2];case pt.H:return Lt[(e-1)*4+3];default:return undefined}};var Ct={getBlocksCount:kt,getTotalCodewordsCount:Rt};const St=new Uint8Array(512);const At=new Uint8Array(256);(function t(){let e=1;for(let t=0;t<255;t++){St[t]=e;At[e]=t;e<<=1;if(e&256){e^=285}}for(let t=255;t<512;t++){St[t]=St[t-255]}})();var Gt=function t(e){if(e<1)throw new Error("log("+e+")");return At[e]};var It=function t(e){return St[e]};var Xt=function t(e,n){if(e===0||n===0)return 0;return St[At[e]+At[n]]};var Nt={log:Gt,exp:It,mul:Xt};var $t=u((function(t,e){e.mul=function t(e,n){const r=new Uint8Array(e.length+n.length-1);for(let t=0;t<e.length;t++){for(let i=0;i<n.length;i++){r[t+i]^=Nt.mul(e[t],n[i])}}return r};e.mod=function t(e,n){let r=new Uint8Array(e);while(r.length-n.length>=0){const t=r[0];for(let e=0;e<n.length;e++){r[e]^=Nt.mul(n[e],t)}let e=0;while(e<r.length&&r[e]===0)e++;r=r.slice(e)}return r};e.generateECPolynomial=function t(n){let r=new Uint8Array([1]);for(let t=0;t<n;t++){r=e.mul(r,new Uint8Array([1,Nt.exp(t)]))}return r}}));function Bt(t){this.genPoly=undefined;this.degree=t;if(this.degree)this.initialize(this.degree)}Bt.prototype.initialize=function t(e){this.degree=e;this.genPoly=$t.generateECPolynomial(this.degree)};Bt.prototype.encode=function t(e){if(!this.genPoly){throw new Error("Encoder not initialized")}const n=new Uint8Array(e.length+this.degree);n.set(e);const r=$t.mod(n,this.genPoly);const i=this.degree-r.length;if(i>0){const t=new Uint8Array(this.degree);t.set(r,i);return t}return r};var Pt=Bt;var Dt=function t(e){return!isNaN(e)&&e>=1&&e<=40};var Ft={isValid:Dt};const Ut="[0-9]+";const zt="[A-Z $%*+\\-./:]+";let Vt="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|"+"[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|"+"[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|"+"[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";Vt=Vt.replace(/u/g,"\\u");const Qt="(?:(?![A-Z0-9 $%*+\\-./:]|"+Vt+")(?:.|[\r\n]))+";var Ht=new RegExp(Vt,"g");var Jt=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");var qt=new RegExp(Qt,"g");var Kt=new RegExp(Ut,"g");var Zt=new RegExp(zt,"g");const Wt=new RegExp("^"+Vt+"$");const Yt=new RegExp("^"+Ut+"$");const te=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");var ee=function t(e){return Wt.test(e)};var ne=function t(e){return Yt.test(e)};var re=function t(e){return te.test(e)};var ie={KANJI:Ht,BYTE_KANJI:Jt,BYTE:qt,NUMERIC:Kt,ALPHANUMERIC:Zt,testKanji:ee,testNumeric:ne,testAlphanumeric:re};var ue=u((function(t,e){e.NUMERIC={id:"Numeric",bit:1<<0,ccBits:[10,12,14]};e.ALPHANUMERIC={id:"Alphanumeric",bit:1<<1,ccBits:[9,11,13]};e.BYTE={id:"Byte",bit:1<<2,ccBits:[8,16,16]};e.KANJI={id:"Kanji",bit:1<<3,ccBits:[8,10,12]};e.MIXED={bit:-1};e.getCharCountIndicator=function t(e,n){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!Ft.isValid(n)){throw new Error("Invalid version: "+n)}if(n>=1&&n<10)return e.ccBits[0];else if(n<27)return e.ccBits[1];return e.ccBits[2]};e.getBestModeForData=function t(n){if(ie.testNumeric(n))return e.NUMERIC;else if(ie.testAlphanumeric(n))return e.ALPHANUMERIC;else if(ie.testKanji(n))return e.KANJI;else return e.BYTE};e.toString=function t(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")};e.isValid=function t(e){return e&&e.bit&&e.ccBits};function n(t){if(typeof t!=="string"){throw new Error("Param is not a string")}const n=t.toLowerCase();switch(n){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}e.from=function t(r,i){if(e.isValid(r)){return r}try{return n(r)}catch(t){return i}}}));var oe=u((function(t,e){const n=1<<12|1<<11|1<<10|1<<9|1<<8|1<<5|1<<2|1<<0;const r=bt.getBCHDigit(n);function i(t,n,r){for(let i=1;i<=40;i++){if(n<=e.getCapacity(i,r,t)){return i}}return undefined}function u(t,e){return ue.getCharCountIndicator(t,e)+4}function o(t,e){let n=0;t.forEach((function(t){const r=u(t.mode,e);n+=r+t.getBitsLength()}));return n}function a(t,n){for(let r=1;r<=40;r++){const i=o(t,r);if(i<=e.getCapacity(r,n,ue.MIXED)){return r}}return undefined}e.from=function t(e,n){if(Ft.isValid(e)){return parseInt(e,10)}return n};e.getCapacity=function t(e,n,r){if(!Ft.isValid(e)){throw new Error("Invalid QR Code version")}if(typeof r==="undefined")r=ue.BYTE;const i=bt.getSymbolTotalCodewords(e);const o=Ct.getTotalCodewordsCount(e,n);const a=(i-o)*8;if(r===ue.MIXED)return a;const f=a-u(r,e);switch(r){case ue.NUMERIC:return Math.floor(f/10*3);case ue.ALPHANUMERIC:return Math.floor(f/11*2);case ue.KANJI:return Math.floor(f/13);case ue.BYTE:default:return Math.floor(f/8)}};e.getBestVersionForData=function t(e,n){let r;const u=pt.from(n,pt.M);if(Array.isArray(e)){if(e.length>1){return a(e,u)}if(e.length===0){return 1}r=e[0]}else{r=e}return i(r.mode,r.getLength(),u)};e.getEncodedBits=function t(e){if(!Ft.isValid(e)||e<7){throw new Error("Invalid QR Code version")}let i=e<<12;while(bt.getBCHDigit(i)-r>=0){i^=n<<bt.getBCHDigit(i)-r}return e<<12|i}}));const ae=1<<10|1<<8|1<<5|1<<4|1<<2|1<<1|1<<0;const fe=1<<14|1<<12|1<<10|1<<4|1<<1;const ce=bt.getBCHDigit(ae);var se=function t(e,n){const r=e.bit<<3|n;let i=r<<10;while(bt.getBCHDigit(i)-ce>=0){i^=ae<<bt.getBCHDigit(i)-ce}return(r<<10|i)^fe};var le={getEncodedBits:se};function he(t){this.mode=ue.NUMERIC;this.data=t.toString()}he.getBitsLength=function t(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};he.prototype.getLength=function t(){return this.data.length};he.prototype.getBitsLength=function t(){return he.getBitsLength(this.data.length)};he.prototype.write=function t(e){let n,r,i;for(n=0;n+3<=this.data.length;n+=3){r=this.data.substr(n,3);i=parseInt(r,10);e.put(i,10)}const u=this.data.length-n;if(u>0){r=this.data.substr(n);i=parseInt(r,10);e.put(i,u*3+1)}};var ve=he;const de=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function be(t){this.mode=ue.ALPHANUMERIC;this.data=t}be.getBitsLength=function t(e){return 11*Math.floor(e/2)+6*(e%2)};be.prototype.getLength=function t(){return this.data.length};be.prototype.getBitsLength=function t(){return be.getBitsLength(this.data.length)};be.prototype.write=function t(e){let n;for(n=0;n+2<=this.data.length;n+=2){let t=de.indexOf(this.data[n])*45;t+=de.indexOf(this.data[n+1]);e.put(t,11)}if(this.data.length%2){e.put(de.indexOf(this.data[n]),6)}};var pe=be;function we(t){this.mode=ue.BYTE;if(typeof t==="string"){this.data=(new TextEncoder).encode(t)}else{this.data=new Uint8Array(t)}}we.getBitsLength=function t(e){return e*8};we.prototype.getLength=function t(){return this.data.length};we.prototype.getBitsLength=function t(){return we.getBitsLength(this.data.length)};we.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++){t.put(this.data[e],8)}};var ye=we;function Oe(t){this.mode=ue.KANJI;this.data=t}Oe.getBitsLength=function t(e){return e*13};Oe.prototype.getLength=function t(){return this.data.length};Oe.prototype.getBitsLength=function t(){return Oe.getBitsLength(this.data.length)};Oe.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=bt.toSJIS(this.data[e]);if(n>=33088&&n<=40956){n-=33088}else if(n>=57408&&n<=60351){n-=49472}else{throw new Error("Invalid SJIS character: "+this.data[e]+"\n"+"Make sure your charset is UTF-8")}n=(n>>>8&255)*192+(n&255);t.put(n,13)}};var Ee=Oe;var je=u((function(t){var e={single_source_shortest_paths:function(t,n,r){var i={};var u={};u[n]=0;var o=e.PriorityQueue.make();o.push(n,0);var a,f,c,s,l,h,v,d,b;while(!o.empty()){a=o.pop();f=a.value;s=a.cost;l=t[f]||{};for(c in l){if(l.hasOwnProperty(c)){h=l[c];v=s+h;d=u[c];b=typeof u[c]==="undefined";if(b||d>v){u[c]=v;o.push(c,v);i[c]=f}}}}if(typeof r!=="undefined"&&typeof u[r]==="undefined"){var p=["Could not find a path from ",n," to ",r,"."].join("");throw new Error(p)}return i},extract_shortest_path_from_predecessor_list:function(t,e){var n=[];var r=e;while(r){n.push(r);r=t[r]}n.reverse();return n},find_path:function(t,n,r){var i=e.single_source_shortest_paths(t,n,r);return e.extract_shortest_path_from_predecessor_list(i,r)},PriorityQueue:{make:function(t){var n=e.PriorityQueue,r={},i;t=t||{};for(i in n){if(n.hasOwnProperty(i)){r[i]=n[i]}}r.queue=[];r.sorter=t.sorter||n.default_sorter;return r},default_sorter:function(t,e){return t.cost-e.cost},push:function(t,e){var n={value:t,cost:e};this.queue.push(n);this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};{t.exports=e}}));var ge=u((function(t,e){function n(t){return unescape(encodeURIComponent(t)).length}function r(t,e,n){const r=[];let i;while((i=t.exec(n))!==null){r.push({data:i[0],index:i.index,mode:e,length:i[0].length})}return r}function i(t){const e=r(ie.NUMERIC,ue.NUMERIC,t);const n=r(ie.ALPHANUMERIC,ue.ALPHANUMERIC,t);let i;let u;if(bt.isKanjiModeEnabled()){i=r(ie.BYTE,ue.BYTE,t);u=r(ie.KANJI,ue.KANJI,t)}else{i=r(ie.BYTE_KANJI,ue.BYTE,t);u=[]}const o=e.concat(n,i,u);return o.sort((function(t,e){return t.index-e.index})).map((function(t){return{data:t.data,mode:t.mode,length:t.length}}))}function u(t,e){switch(e){case ue.NUMERIC:return ve.getBitsLength(t);case ue.ALPHANUMERIC:return pe.getBitsLength(t);case ue.KANJI:return Ee.getBitsLength(t);case ue.BYTE:return ye.getBitsLength(t)}}function o(t){return t.reduce((function(t,e){const n=t.length-1>=0?t[t.length-1]:null;if(n&&n.mode===e.mode){t[t.length-1].data+=e.data;return t}t.push(e);return t}),[])}function a(t){const e=[];for(let r=0;r<t.length;r++){const i=t[r];switch(i.mode){case ue.NUMERIC:e.push([i,{data:i.data,mode:ue.ALPHANUMERIC,length:i.length},{data:i.data,mode:ue.BYTE,length:i.length}]);break;case ue.ALPHANUMERIC:e.push([i,{data:i.data,mode:ue.BYTE,length:i.length}]);break;case ue.KANJI:e.push([i,{data:i.data,mode:ue.BYTE,length:n(i.data)}]);break;case ue.BYTE:e.push([{data:i.data,mode:ue.BYTE,length:n(i.data)}])}}return e}function f(t,e){const n={};const r={start:{}};let i=["start"];for(let o=0;o<t.length;o++){const a=t[o];const f=[];for(let t=0;t<a.length;t++){const c=a[t];const s=""+o+t;f.push(s);n[s]={node:c,lastCount:0};r[s]={};for(let t=0;t<i.length;t++){const o=i[t];if(n[o]&&n[o].node.mode===c.mode){r[o][s]=u(n[o].lastCount+c.length,c.mode)-u(n[o].lastCount,c.mode);n[o].lastCount+=c.length}else{if(n[o])n[o].lastCount=c.length;r[o][s]=u(c.length,c.mode)+4+ue.getCharCountIndicator(c.mode,e)}}}i=f}for(let t=0;t<i.length;t++){r[i[t]].end=0}return{map:r,table:n}}function c(t,e){let n;const r=ue.getBestModeForData(t);n=ue.from(e,r);if(n!==ue.BYTE&&n.bit<r.bit){throw new Error('"'+t+'"'+" cannot be encoded with mode "+ue.toString(n)+".\n Suggested mode is: "+ue.toString(r))}if(n===ue.KANJI&&!bt.isKanjiModeEnabled()){n=ue.BYTE}switch(n){case ue.NUMERIC:return new ve(t);case ue.ALPHANUMERIC:return new pe(t);case ue.KANJI:return new Ee(t);case ue.BYTE:return new ye(t)}}e.fromArray=function t(e){return e.reduce((function(t,e){if(typeof e==="string"){t.push(c(e,null))}else if(e.data){t.push(c(e.data,e.mode))}return t}),[])};e.fromString=function t(n,r){const u=i(n,bt.isKanjiModeEnabled());const c=a(u);const s=f(c,r);const l=je.find_path(s.map,"start","end");const h=[];for(let t=1;t<l.length-1;t++){h.push(s.table[l[t]].node)}return e.fromArray(o(h))};e.rawSplit=function t(n){return e.fromArray(i(n,bt.isKanjiModeEnabled()))}}));function me(t,e){const n=t.size;const r=_t.getPositions(e);for(let e=0;e<r.length;e++){const i=r[e][0];const u=r[e][1];for(let e=-1;e<=7;e++){if(i+e<=-1||n<=i+e)continue;for(let r=-1;r<=7;r++){if(u+r<=-1||n<=u+r)continue;if(e>=0&&e<=6&&(r===0||r===6)||r>=0&&r<=6&&(e===0||e===6)||e>=2&&e<=4&&r>=2&&r<=4){t.set(i+e,u+r,true,true)}else{t.set(i+e,u+r,false,true)}}}}}function xe(t){const e=t.size;for(let n=8;n<e-8;n++){const e=n%2===0;t.set(n,6,e,true);t.set(6,n,e,true)}}function _e(t,e){const n=jt.getPositions(e);for(let e=0;e<n.length;e++){const r=n[e][0];const i=n[e][1];for(let e=-2;e<=2;e++){for(let n=-2;n<=2;n++){if(e===-2||e===2||n===-2||n===2||e===0&&n===0){t.set(r+e,i+n,true,true)}else{t.set(r+e,i+n,false,true)}}}}}function Te(t,e){const n=t.size;const r=oe.getEncodedBits(e);let i,u,o;for(let e=0;e<18;e++){i=Math.floor(e/3);u=e%3+n-8-3;o=(r>>e&1)===1;t.set(i,u,o,true);t.set(u,i,o,true)}}function Me(t,e,n){const r=t.size;const i=le.getEncodedBits(e,n);let u,o;for(u=0;u<15;u++){o=(i>>u&1)===1;if(u<6){t.set(u,8,o,true)}else if(u<8){t.set(u+1,8,o,true)}else{t.set(r-15+u,8,o,true)}if(u<8){t.set(8,r-u-1,o,true)}else if(u<9){t.set(8,15-u-1+1,o,true)}else{t.set(8,15-u-1,o,true)}}t.set(r-8,8,1,true)}function Le(t,e){const n=t.size;let r=-1;let i=n-1;let u=7;let o=0;for(let a=n-1;a>0;a-=2){if(a===6)a--;while(true){for(let n=0;n<2;n++){if(!t.isReserved(i,a-n)){let r=false;if(o<e.length){r=(e[o]>>>u&1)===1}t.set(i,a-n,r);u--;if(u===-1){o++;u=7}}}i+=r;if(i<0||n<=i){i-=r;r=-r;break}}}}function ke(t,e,n){const r=new yt;n.forEach((function(e){r.put(e.mode.bit,4);r.put(e.getLength(),ue.getCharCountIndicator(e.mode,t));e.write(r)}));const i=bt.getSymbolTotalCodewords(t);const u=Ct.getTotalCodewordsCount(t,e);const o=(i-u)*8;if(r.getLengthInBits()+4<=o){r.put(0,4)}while(r.getLengthInBits()%8!==0){r.putBit(0)}const a=(o-r.getLengthInBits())/8;for(let t=0;t<a;t++){r.put(t%2?17:236,8)}return Re(r,t,e)}function Re(t,e,n){const r=bt.getSymbolTotalCodewords(e);const i=Ct.getTotalCodewordsCount(e,n);const u=r-i;const o=Ct.getBlocksCount(e,n);const a=r%o;const f=o-a;const c=Math.floor(r/o);const s=Math.floor(u/o);const l=s+1;const h=c-s;const v=new Pt(h);let d=0;const b=new Array(o);const p=new Array(o);let w=0;const y=new Uint8Array(t.buffer);for(let t=0;t<o;t++){const e=t<f?s:l;b[t]=y.slice(d,d+e);p[t]=v.encode(b[t]);d+=e;w=Math.max(w,e)}const O=new Uint8Array(r);let E=0;let j,g;for(j=0;j<w;j++){for(g=0;g<o;g++){if(j<b[g].length){O[E++]=b[g][j]}}}for(j=0;j<h;j++){for(g=0;g<o;g++){O[E++]=p[g][j]}}return O}function Ce(t,e,n,r){let i;if(Array.isArray(t)){i=ge.fromArray(t)}else if(typeof t==="string"){let r=e;if(!r){const e=ge.rawSplit(t);r=oe.getBestVersionForData(e,n)}i=ge.fromString(t,r||40)}else{throw new Error("Invalid data")}const u=oe.getBestVersionForData(i,n);if(!u){throw new Error("The amount of data is too big to be stored in a QR Code")}if(!e){e=u}else if(e<u){throw new Error("\n"+"The chosen QR Code version cannot contain this amount of data.\n"+"Minimum version required to store current data is: "+u+".\n")}const o=ke(e,n,i);const a=bt.getSymbolSize(e);const f=new Et(a);me(f,e);xe(f);_e(f,e);Me(f,n,0);if(e>=7){Te(f,e)}Le(f,o);if(isNaN(r)){r=Tt.getBestMask(f,Me.bind(null,f,n))}Tt.applyMask(r,f);Me(f,n,r);return{modules:f,version:e,errorCorrectionLevel:n,maskPattern:r,segments:i}}var Se=function t(e,n){if(typeof e==="undefined"||e===""){throw new Error("No input text")}let r=pt.M;let i;let u;if(typeof n!=="undefined"){r=pt.from(n.errorCorrectionLevel,pt.M);i=oe.from(n.version);u=Tt.from(n.maskPattern);if(n.toSJISFunc){bt.setToSJISFunction(n.toSJISFunc)}}return Ce(e,i,r,u)};var Ae={create:Se};var Ge=u((function(t,e){function n(t){if(typeof t==="number"){t=t.toString()}if(typeof t!=="string"){throw new Error("Color should be defined as hex string")}let e=t.slice().replace("#","").split("");if(e.length<3||e.length===5||e.length>8){throw new Error("Invalid hex color: "+t)}if(e.length===3||e.length===4){e=Array.prototype.concat.apply([],e.map((function(t){return[t,t]})))}if(e.length===6)e.push("F","F");const n=parseInt(e.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:n&255,hex:"#"+e.slice(0,6).join("")}}e.getOptions=function t(e){if(!e)e={};if(!e.color)e.color={};const r=typeof e.margin==="undefined"||e.margin===null||e.margin<0?4:e.margin;const i=e.width&&e.width>=21?e.width:undefined;const u=e.scale||4;return{width:i,scale:i?4:u,margin:r,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}};e.getScale=function t(e,n){return n.width&&n.width>=e+n.margin*2?n.width/(e+n.margin*2):n.scale};e.getImageWidth=function t(n,r){const i=e.getScale(n,r);return Math.floor((n+r.margin*2)*i)};e.qrToImageData=function t(n,r,i){const u=r.modules.size;const o=r.modules.data;const a=e.getScale(u,i);const f=Math.floor((u+i.margin*2)*a);const c=i.margin*a;const s=[i.color.light,i.color.dark];for(let t=0;t<f;t++){for(let e=0;e<f;e++){let r=(t*f+e)*4;let l=i.color.light;if(t>=c&&e>=c&&t<f-c&&e<f-c){const n=Math.floor((t-c)/a);const r=Math.floor((e-c)/a);l=s[o[n*u+r]?1:0]}n[r++]=l.r;n[r++]=l.g;n[r++]=l.b;n[r]=l.a}}}}));var Ie=u((function(t,e){function n(t,e,n){t.clearRect(0,0,e.width,e.height);if(!e.style)e.style={};e.height=n;e.width=n;e.style.height=n+"px";e.style.width=n+"px"}function r(){try{return document.createElement("canvas")}catch(t){throw new Error("You need to specify a canvas element")}}e.render=function t(e,i,u){let o=u;let a=i;if(typeof o==="undefined"&&(!i||!i.getContext)){o=i;i=undefined}if(!i){a=r()}o=Ge.getOptions(o);const f=Ge.getImageWidth(e.modules.size,o);const c=a.getContext("2d");const s=c.createImageData(f,f);Ge.qrToImageData(s.data,e,o);n(c,a,f);c.putImageData(s,0,0);return a};e.renderToDataURL=function t(n,r,i){let u=i;if(typeof u==="undefined"&&(!r||!r.getContext)){u=r;r=undefined}if(!u)u={};const o=e.render(n,r,u);const a=u.type||"image/png";const f=u.rendererOpts||{};return o.toDataURL(a,f.quality)}}));function Xe(t,e){const n=t.a/255;const r=e+'="'+t.hex+'"';return n<1?r+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function Ne(t,e,n){let r=t+e;if(typeof n!=="undefined")r+=" "+n;return r}function $e(t,e,n){let r="";let i=0;let u=false;let o=0;for(let a=0;a<t.length;a++){const f=Math.floor(a%e);const c=Math.floor(a/e);if(!f&&!u)u=true;if(t[a]){o++;if(!(a>0&&f>0&&t[a-1])){r+=u?Ne("M",f+n,.5+c+n):Ne("m",i,0);i=0;u=false}if(!(f+1<e&&t[a+1])){r+=Ne("h",o);o=0}}else{i++}}return r}var Be=function t(e,n,r){const i=Ge.getOptions(n);const u=e.modules.size;const o=e.modules.data;const a=u+i.margin*2;const f=!i.color.light.a?"":"<path "+Xe(i.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>';const c="<path "+Xe(i.color.dark,"stroke")+' d="'+$e(o,u,i.margin)+'"/>';const s='viewBox="'+"0 0 "+a+" "+a+'"';const l=!i.width?"":'width="'+i.width+'" height="'+i.width+'" ';const h='<svg xmlns="http://www.w3.org/2000/svg" '+l+s+' shape-rendering="crispEdges">'+f+c+"</svg>\n";if(typeof r==="function"){r(null,h)}return h};var Pe={render:Be};function De(t,e,n,r,i){const u=[].slice.call(arguments,1);const o=u.length;const a=typeof u[o-1]==="function";if(!a&&!ot()){throw new Error("Callback required as last argument")}if(a){if(o<2){throw new Error("Too few arguments provided")}if(o===2){i=n;n=e;e=r=undefined}else if(o===3){if(e.getContext&&typeof i==="undefined"){i=r;r=undefined}else{i=r;r=n;n=e;e=undefined}}}else{if(o<1){throw new Error("Too few arguments provided")}if(o===1){n=e;e=r=undefined}else if(o===2&&!e.getContext){r=n;n=e;e=undefined}return new Promise((function(i,u){try{const u=Ae.create(n,r);i(t(u,e,r))}catch(t){u(t)}}))}try{const u=Ae.create(n,r);i(null,t(u,e,r))}catch(t){i(t)}}var Fe=Ae.create;var Ue=De.bind(null,Ie.render);var ze=De.bind(null,Ie.renderToDataURL);var Ve=De.bind(null,(function(t,e,n){return Pe.render(t,n)}));var Qe={create:Fe,toCanvas:Ue,toDataURL:ze,toString:Ve};class He extends r{async run(){return new Promise(((t,e)=>{Qe.toDataURL(this.layer.data,this.layer.canvasOptions.opts).then((n=>{const r=new Image;r.src=n;try{r.onload=()=>{this.canvasContent.drawImage(r,this.layer.x,this.layer.y,this.layer.canvasOptions.width,this.layer.canvasOptions.height);t()}}catch(t){e(t)}})).catch((t=>{console.error(t)}))}))}}class Je extends r{async run(){this.canvasContent.fillStyle=this.layer.canvasOptions.fillStyle;this.canvasContent.font=this.layer.canvasOptions.font;this.canvasContent.textAlign=this.layer.canvasOptions.textAlign;if("maxWidth"in this.layer.canvasOptions){let t=this.layer.data.split(" ");let e="";let n=this.layer.y;if(!("lineSpace"in this.layer.canvasOptions)){throw new Error("Es necesario un lineSpace cuando se utiliza maxWidth")}let r=this.layer.canvasOptions.lineSpace;for(let i=0;i<t.length;i++){let u=e+t[i]+" ";let o=this.canvasContent.measureText(u);let a=o.width;if(a>this.layer.canvasOptions.maxWidth&&i>0){this.canvasContent.fillText(e,this.layer.x,n);e=t[i]+" ";n=n+r}else{e=u}}this.canvasContent.fillText(e,this.layer.x,n)}else{this.canvasContent.fillText(this.layer.data,this.layer.x,this.layer.y)}}}var qe;(function(t){t["text"]="text";t["image"]="image";t["qr"]="qr";t["barcode"]="barcode"})(qe||(qe={}));async function Ke(t,e){const n={[qe.text]:new Je(t,e),[qe.image]:new ut(t,e),[qe.barcode]:new it(t,e),[qe.qr]:new He(t,e)};return await n[e.type].run()}const Ze="image-canvas{display:block}";const We=class{constructor(e){t(this,e);this.width=undefined;this.height=undefined;this.canvasFillStyle="black";this.layers=[];this.imgLoading=true}handlerLayerChange(){this.__loadData()}async componentWillLoad(){this.canvas=this.__createCanvas();this.el.appendChild(this.canvas);await this.__loadData()}__createCanvas(){this.canvas=document.createElement("canvas");this.canvas.height=this.height;this.canvas.width=this.width;this.canvas.style.width="100%";this.canvas.style.height="100%";return this.canvas}async __loadData(){const t=this.canvas.getContext("2d");let e=this.layers;for(var n=0;n<e.length;n++){await Ke(t,e[n])}}render(){if(this.layers.length==0){return e("p",{style:{color:"red"}},'ERR: Debe ejecutar $("image-cangas").layers = layers[] para poder mostrar algo)')}}get el(){return n(this)}static get watchers(){return{layers:["handlerLayerChange"]}}};We.style=Ze;export{We as image_canvas};
//# sourceMappingURL=p-a46d0a8b.entry.js.map