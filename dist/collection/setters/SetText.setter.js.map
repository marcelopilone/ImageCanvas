{"version":3,"file":"SetText.setter.js","sourceRoot":"","sources":["../../src/setters/SetText.setter.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,cAAc,EAAE,MAAM,mBAAmB,CAAC;AAEnD,MAAM,OAAO,OAAQ,SAAQ,cAAc;EAEvC,KAAK,CAAC,GAAG;IACL,IAAI,CAAC,aAAa,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,SAAS,CAAC;IAClE,IAAI,CAAC,aAAa,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC;IACxD,IAAI,CAAC,aAAa,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,SAA4B,CAAC;IACrF,IAAG,UAAU,IAAI,IAAI,CAAC,KAAK,CAAC,aAAa,EAAC;MACtC,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;MACvC,IAAI,IAAI,GAAG,EAAE,CAAC;MACd,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;MAC1B,IAAG,CAAC,CAAC,WAAW,IAAI,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,EAAC;QAC1C,MAAM,IAAI,KAAK,CAAC,sDAAsD,CAAC,CAAC;OAC3E;MACD,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,SAAS,CAAC;MAE/C,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;QACnC,IAAI,QAAQ,GAAG,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;QACrC,IAAI,OAAO,GAAG,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;QACvD,IAAI,SAAS,GAAG,OAAO,CAAC,KAAK,CAAC;QAC9B,IAAG,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,QAAQ,IAAI,CAAC,GAAG,CAAC,EAAC;UACtD,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;UACxD,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;UACtB,MAAM,GAAG,MAAM,GAAG,KAAK,CAAC;SAC3B;aAAI;UACD,IAAI,GAAG,QAAQ,CAAC;SACnB;OACJ;MACD,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;KAC3D;SAAI;MACD,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;KAC5E;EAEL,CAAC;CACJ","sourcesContent":["import { ContentDataText } from \"../components/type\";\nimport { AbstractSetter } from \"./Abstract.setter\";\n\nexport class SetText extends AbstractSetter {\n    layer: ContentDataText\n    async run() {\n        this.canvasContent.fillStyle = this.layer.canvasOptions.fillStyle;\n        this.canvasContent.font = this.layer.canvasOptions.font;\n        this.canvasContent.textAlign = this.layer.canvasOptions.textAlign as CanvasTextAlign;\n        if('maxWidth' in this.layer.canvasOptions){\n            let words = this.layer.data.split(' ');\n            let line = '';\n            let startY = this.layer.y;\n            if(!('lineSpace' in this.layer.canvasOptions)){\n                throw new Error(\"Es necesario un lineSpace cuando se utiliza maxWidth\");\n            }\n            let space = this.layer.canvasOptions.lineSpace;\n\n            for (let i = 0; i < words.length; i++) {\n                let testLine = line + words[i] + ' ';                \n                let metrics = this.canvasContent.measureText(testLine);\n                let testWidth = metrics.width;\n                if(testWidth > this.layer.canvasOptions.maxWidth && i > 0){\n                    this.canvasContent.fillText(line, this.layer.x, startY);\n                    line = words[i] + ' ';\n                    startY = startY + space;\n                }else{\n                    line = testLine;\n                }\n            }\n            this.canvasContent.fillText(line, this.layer.x, startY);\n        }else{\n            this.canvasContent.fillText(this.layer.data, this.layer.x, this.layer.y);\n        }\n        \n    }\n}"]}